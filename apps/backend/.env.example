# ============================================
# Catallaxyz Backend Environment Variables
# ============================================
# Copy this file to .env for local development
# For production, set these as environment variables in your deployment

# ===== Server Configuration =====
PORT=4000
HOST=0.0.0.0
NODE_ENV=development

# ===== API Ports (Multi-service Architecture) =====
DATA_API_PORT=3001
CLOB_API_PORT=3002
WS_PORT=3003

# ===== Redis Configuration (Required for CLOB) =====
# Option 1: Individual settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
# Option 2: Connection URL (takes precedence)
# REDIS_URL=redis://user:password@localhost:6379/0

# ===== Solana Configuration =====
# RPC URL (use paid RPC for production)
# Devnet: https://api.devnet.solana.com
# Mainnet: https://rpc.helius.xyz/?api-key=YOUR_KEY
SOLANA_RPC_URL=https://devnet.helius-rpc.com/?api-key=e905218d-0b4d-4688-b054-f4c92d5f4aa1
# Your deployed program ID
PROGRAM_ID=4Vpqj1dsjLX7cQ3z85Sh3ZUQ1Adz7rdzvMQnbtgx7n9u
# USDC Mint Address
# Devnet: Your test USDC mint
# Mainnet: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
USDC_MINT_ADDRESS=5xER7fdAGEywi3BDSEniDUC1sXwKWAaL8K9C29N6WqXQ

# ===== Auth Configuration =====
# Signature timestamp window (seconds)
AUTH_TIMESTAMP_WINDOW_SECONDS=300

# ===== Admin Configuration =====
# Admin wallet address for privileged operations
ADMIN_WALLET_ADDRESS=DS7skVfG8QZdbnrnNpePfAezCbJSEuxZTuvvSWuDUdGZ

# ===== Keeper Configuration (Automated Tasks) =====
# Keeper wallet for automated tasks (terminating inactive markets)
# This wallet must be registered as the keeper in the Global account
# 
# Setup steps:
# 1. Generate a new keypair: solana-keygen new -o keeper.json
# 2. Get the public key: solana-keygen pubkey keeper.json
# 3. Register the keeper in the contract:
#    KEEPER_PUBLIC_KEY=<pubkey> yarn ts-node scripts/set-keeper.ts
# 4. Copy the content of keeper.json here (64 bytes JSON array)
#
KEEPER_SECRET_KEY=[134,62,186,183,53,214,232,45,147,67,213,73,67,112,96,141,186,246,86,91,170,123,105,155,90,94,212,104,207,202,136,250,74,138,210,199,139,244,91,1,232,203,138,36,121,64,91,250,235,13,244,33,64,255,90,96,216,150,250,53,99,58,51,230]
# Cron job authentication secret (for external cron services)
CRON_SECRET=your-random-cron-secret-here
# Days of inactivity before market termination (default: 7)
INACTIVITY_CRON_DAYS=7
# Enable batch processing for termination (recommended: true)
TERMINATION_USE_BATCH=true
# Number of markets to terminate per transaction (1-5, default: 4)
# Higher = fewer transactions but more compute units per tx
TERMINATION_BATCH_SIZE=4

# ===== Operator Configuration (Exchange System) =====
# Operator wallet for executing trades (fill_order, match_orders)
# This wallet submits match_orders transactions and pays gas fees
# Must be registered as operator via add_operator instruction (or use authority)
#
# Setup steps:
# 1. Generate a new keypair: solana-keygen new -o operator.json
# 2. Get the public key: solana-keygen pubkey operator.json
# 3. (Optional) Register as operator if not using authority:
#    OPERATOR_PUBLIC_KEY=<pubkey> yarn ts-node scripts/add-operator.ts
# 4. Copy the content of operator.json here (64 bytes JSON array)
#
OPERATOR_SECRET_KEY=[43,255,40,103,168,183,150,167,85,246,45,103,72,39,211,101,26,56,151,140,213,109,183,179,206,83,210,44,134,109,84,44,126,156,155,145,216,150,32,223,207,195,126,243,178,13,130,29,79,244,130,191,221,102,180,213,104,43,12,113,133,189,220,255]

# ===== Platform Authority Configuration =====
# Platform authority wallet secret key (JSON array format from keypair file)
# Used for admin operations on-chain
PLATFORM_AUTHORITY_SECRET_KEY=[208,132,41,7,30,158,166,106,245,104,202,250,14,232,133,193,26,248,66,227,106,161,0,115,76,145,60,36,220,3,240,191,130,236,43,203,144,94,17,155,114,57,55,231,245,215,81,63,252,202,67,227,110,8,142,255,66,236,87,80,3,11,128,151]

# ===== Supabase Configuration =====
SUPABASE_URL="https://hzdmjlxhtlyyxysrjper.supabase.co"
SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh6ZG1qbHhodGx5eXh5c3JqcGVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2MzQwMTAsImV4cCI6MjA4NTIxMDAxMH0.CtxJpnY0LsvjLnsPpkpiYEW8BN9YFRgZXr9a4aBAo1M"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh6ZG1qbHhodGx5eXh5c3JqcGVyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2OTYzNDAxMCwiZXhwIjoyMDg1MjEwMDEwfQ.RnLu2DYz7cykZAKFui5Hee3gdsZ9tf-K35PV4RSo-54"
SUPABASE_JWT_SECRET="uudYv7qG2YhY2A99afAmymnz9GMaAaLtWnu2N/jOhS6mTcLQINDx9vL8DPQ4+sY+rRswgiJb+XCe/I4iVbeLlQ=="
SUPABASE_PUBLISHABLE_KEY="sb_publishable_okSX0arZ7HtfRUv16JGZVw_17nYQHCP"
SUPABASE_SECRET_KEY="sb_secret_-PHsV0eOJJIfh_wQBLB05Q_1FxIXdDb"

# ===== Security Configuration =====
# CORS allowed origins (comma-separated)
# Leave empty for development (allows all)
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
# Rate limiting (requests per minute)
RATE_LIMIT_MAX=120
RATE_LIMIT_WINDOW_MS=60000

# ===== Geo Restriction =====
GEO_CHECK_ENABLED=false
# Blocked countries (comma-separated ISO codes)
GEO_BLOCKED_COUNTRIES=

# ===== Logging =====
# Log level: debug | info | warn | error
LOG_LEVEL=info

# ===== Error Tracking (Optional - 可选) =====
# Sentry 用于生产环境错误追踪
# 如果不配置 SENTRY_DSN，项目仍可正常运行，错误仅输出到控制台
# 生产环境建议注册 https://sentry.io 获取 DSN
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ===== Health Check =====
# External services to check (comma-separated)
HEALTH_CHECK_SERVICES=redis,supabase,solana

